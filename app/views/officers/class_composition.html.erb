<% content_for :sidebar do %>
  <div class="sidebar-header">
    <h3>Welcome <%= @officer.to_s %>!</h3>
  </div>

  <ul class="list-unstyled components">
    <p>Officer page</p>
    <li><%= link_to " Home", officer_path(@officer), class: 'mdi mdi-view-dashboard' %></li>
    <li><%= link_to " Parents", officer_parents_url(@officer), class: 'mdi mdi-human-male-girl' %></li>
    <li class="active"><%= link_to " Class composition", officer_classes_url(@officer), class: 'mdi mdi-account-group' %></li>
  </ul>
<% end %>
<script>
  function loadClasses(class_id){
    $.ajax({
          type: 'GET',
          url: "/officers/<%= @officer.id %>/class_composition/" + class_id, 
          contentType: "text/javascript",
      }).done(function(response){

        });
  };
  function editClass(id_class){
    $.ajax({
        type: 'GET',
        url: "/school_classes/" + id_class + "/edit", 
        contentType: "text/javascript",
       }).done(function(response){

        });
  };
  $(document).ready(function() {
    document.getElementById("class_select").value = "<%= @class.id %>";
    document.getElementById("class_select").onchange = function(){
      loadClasses(document.getElementById("class_select").value);
    };
    document.getElementById("edit_class").onclick = function(){
      editClass(document.getElementById("class_select").value);
    };
  });
</script>
<% content_for :navbar do %>
<ul class="navbar-nav mr-auto">
<li class="nav-item">
  <div class="input-group">
      <%= select_tag :class_select, options_for_select(@classes.map{|s| [s.class_to_s, s.id]}), class: "custom-select", remote: true%>  
      <div class="input-group-append">
      <button class="btn btn-warning" type="button" id="edit_class">Edit</button>
      </div>
  </div>
</li>
</ul>
<% end %>
<br>
<h4 style="text-align: left">Students' list:</h2>
<div id="editclass">
<br>
  <%= render partial: 'school_classes/class', locals: {class: @class} %>
</div>