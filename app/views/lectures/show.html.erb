<% content_for :navbar do %>
  <ul class="navbar-nav mr-auto">
    <li class="nav-item">
      <%= link_to " Back to teacher view", teacher_lectures_path(@lecture.teacher, school_class_id: @lecture.school_class), class: "btn btn-primary mdi mdi-arrow-left" %>
    </li>
  </ul>
  <span class="navbar-brand"><%= @lecture.name %></span>
<% end %>

<div class="row">
  <div class="col-sm">
    <h3>School Class: <%= @lecture.school_class.class_to_s %></h3>
  </div>
  <div class="col-sm">
    <h3>Subject: <%= @lecture.subject %></h3>
  </div>
  <div class="col-sm">
    <h3>Date: <%= @lecture.date %></h3>
  </div>
</div>

<%= form_with(model: @lecture) do |f| %>
  <%= f.text_field :topics %>
  <%= f.submit "Update Topics" %>
<% end %>

<div class="row">
  <div class="col-sm">
    <%= link_to 'Add Mark', new_mark_path(params: { school_class_id: @lecture.school_class, teacher_id: @lecture.teacher }), {remote: true, 'data-toggle' =>  "modal", 'data-target' => '#mark-modal', class: 'btn btn-primary btn-lg'}  %>
  </div>
  <div class="col-sm">
    <%= link_to "Add Assignments" %>
  </div>
</div>

<div class="accordion" id="lecture-tables">
  <div class="card">
    <div class="card-header" id="headingOne">
      <h5 class="mb-0">
        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#marks-table" aria-expanded="true" aria-controls="marks-table">
          View Marks
        </button>
      </h5>
    </div>

    <div id="marks-table" class="collapse" aria-labelledby="headingOne" data-parent="#lecture-tables">
      <div class="card-body">
        <table id="marks">
          <thead>
          <tr>
            <th>Teacher</th>
            <th>Mark</th>
            <th>Subject</th>
            <th>Student</th>
            <th>Mark date</th>
            <th>Notes</th>
            <th colspan="3"></th>
          </tr>
          </thead>
          <tbody id="marks-body">
          <%= render partial: 'marks/mark', collection: @lecture.teacher.marks.sort_by(&:date) %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingTwo">
      <h5 class="mb-0">
        <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#assignments-table" aria-expanded="false" aria-controls="assignments-table">
          View Assignments
        </button>
      </h5>
    </div>
    <div id="assignments-table" class="collapse" aria-labelledby="headingTwo" data-parent="#lecture-tables">
      <div class="card-body">
        Work in progress :)
      </div>
    </div>
  </div>
  <div class="card">
    <div class="card-header" id="headingThree">
      <h5 class="mb-0">
        <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#attendance-table" aria-expanded="false" aria-controls="attendance-table">
          Manage Student Attendance
        </button>
      </h5>
    </div>
    <div id="attendance-table" class="collapse" aria-labelledby="headingThree" data-parent="#lecture-tables">
      <div class="card-body">
        Work in progress :)
      </div>
    </div>
  </div>
</div>

<%= render partial: 'marks/modal_form' %>